define(["utils/utils"],function(a){return Backbone.Model.extend({initialize:function(){this.queue=[],this.process={},this.counter=0,this.queue_id=a.uid(),this.on("refresh",function(){if(this.queue.length>0&&this.ready()){var a=this.queue[0];this.queue.splice(0,1),a&&a()}})},execute:function(a){this.queue.push(a),this.trigger("refresh")},register:function(){var b=this.queue_id+":"+a.uid();return this.process[b]=!0,this.counter++,console.debug("Deferred:register() - Register "+b),b},done:function(a){this.process[a]&&(delete this.process[a],this.counter--,console.debug("Deferred:done() - Unregister "+a),this.trigger("refresh"))},reset:function(){this.queue=[]},ready:function(){return 0==this.counter}})});
//# sourceMappingURL=../../maps/utils/deferred.js.map
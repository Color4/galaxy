define(function(a,b,c){"use strict";function d(a,b){if("number"!=typeof a||"number"!=typeof b)throw"Bad range "+a+","+b;this._min=a,this._max=b}function e(a){var b=a.sort(j),c=[],d=b.shift();b.forEach(function(a){a._min<=d._max?a._max>d._max&&(d._max=a._max):(c.push(d),d=a)}),c.push(d),this._ranges=c}function f(a,b){return a instanceof e||(a instanceof Array||(a=[a]),a=new e(a)),b&&a.insertRange(b),a}function g(a,b){for(var c=a.ranges(),f=b.ranges(),g=c.length,h=f.length,i=0,j=0,k=[];g>i&&h>j;){var a=c[i],b=f[j],l=Math.max(a.min(),b.min()),m=Math.min(a.max(),b.max());m>=l&&k.push(new d(l,m)),a.max()>b.max()?++j:++i}return 0==k.length?null:1==k.length?k[0]:new e(k)}function h(a){for(var b=0,c=a.ranges(),d=0;d<c.length;++d){var e=c[d];b+=e.max()-e.min()+1}return b}function i(a,b){return a.min()<b.min()?-1:a.min()>b.min()?1:a.max()<b.max()?-1:b.max()>a.max()?1:0}function j(a,b){return a._min<b._min?-1:a._min>b._min?1:a._max<b._max?-1:b._max>a._max?1:0}d.prototype.min=function(){return this._min},d.prototype.max=function(){return this._max},d.prototype.contains=function(a){return a>=this._min&&a<=this._max},d.prototype.isContiguous=function(){return!0},d.prototype.ranges=function(){return[this]},d.prototype._pushRanges=function(a){a.push(this)},d.prototype.toString=function(){return"["+this._min+"-"+this._max+"]"},e.prototype.min=function(){return this._ranges[0].min()},e.prototype.max=function(){return this._ranges[this._ranges.length-1].max()},e.prototype.lower_bound=function(a){var b=this.ranges();if(a>this.max())return b.length;if(a<this.min())return 0;for(var c=0,d=b.length-1;d>=c;){var e=Math.floor((c+d)/2);if(a>b[e]._max)c=e+1;else{if(!(a<b[e]._min))return e;d=e-1}}return c},e.prototype.contains=function(a){var b=this.lower_bound(a);return b<this._ranges.length&&this._ranges[b].contains(a)?!0:!1},e.prototype.insertRange=function(a){var b=this.lower_bound(a._min);if(b===this._ranges.length)return void this._ranges.push(a);var c=this.ranges();if(a._max<c[b]._min)return void this._ranges.splice(b,0,a);c[b]._min<a._min&&(a._min=c[b]._min);for(var d=b+1;d<c.length&&c[d]._min<=a._max;)d++;d--,c[d]._max>a._max&&(a._max=c[d]._max),this._ranges.splice(b,d-b+1,a)},e.prototype.isContiguous=function(){return this._ranges.length>1},e.prototype.ranges=function(){return this._ranges},e.prototype._pushRanges=function(a){for(var b=0;b<this._ranges.length;++b)a.push(this._ranges[b])},e.prototype.toString=function(){for(var a="",b=0;b<this._ranges.length;++b)b>0&&(a+=","),a+=this._ranges[b].toString();return a},"undefined"!=typeof c&&(c.exports={Range:d,union:f,intersection:g,coverage:h,rangeOver:i,_rangeOrder:j})});
//# sourceMappingURL=../../../maps/libs/bbi/spans.js.map